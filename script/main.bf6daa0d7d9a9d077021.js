!function(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=4)}([function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var a=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.setCardsArr=function(t){localStorage.setItem("cards",JSON.stringify(t))},this.setNewsDate=function(t){localStorage.setItem("newsDate",JSON.stringify(t))},this.setCardsShown=function(t){localStorage.setItem("cardsNumber",JSON.stringify(t))},this.setReqValue=function(t){localStorage.setItem("request",JSON.stringify(t))},this.setResults=function(t){localStorage.setItem("totalResults",JSON.stringify(t))},this.setAnalyticsDates=function(t){localStorage.setItem("analyticsDates",JSON.stringify(t))},this.setTitleMatches=function(t){localStorage.setItem("titleMatches",JSON.stringify(t))},this.setBarStatistics=function(t){localStorage.setItem("barStatistics",JSON.stringify(t))},this.clearStorage=function(){localStorage.clear()}}},function(t,e,r){},,,function(t,e,r){"use strict";r.r(e);r(1);var a=function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dateAdaptation=function(t){return r.dateStr=t.substr(0,10),r.re=/\W+/gi,r.newDateStr=r.dateStr.replace(r.re,","),r.editedDate=new Date(r.newDateStr),r.dateFormatter=new Intl.DateTimeFormat("ru",{day:"numeric",month:"long"}),r.dateFormatter.format(r.editedDate).toString()+", "+r.editedDate.getFullYear().toString()},this.titleAdaptation=function(t){return t.length>=75?r.textElem="".concat(t.substr(0,76),"..."):t},this.create=function(){return r.template=document.querySelector("#news-card-template").content,r.cardElement=r.template.cloneNode(!0).querySelector(".card"),r.link=r.cardElement.querySelector(".card__link"),r.cardImg=r.cardElement.querySelector(".card__img"),r.data=r.cardElement.querySelector(".card__data"),r.title=r.cardElement.querySelector(".card__title"),r.text=r.cardElement.querySelector(".card__text"),r.source=r.cardElement.querySelector(".card__source"),r.link.href=r.cardData.url,r.cardImg.src=r.cardData.urlToImage,r.data.textContent=r.dateAdaptation(r.cardData.publishedAt),r.title.textContent=r.titleAdaptation(r.cardData.title),r.text.textContent=r.cardData.description,r.source.textContent=r.cardData.source.name,r.cardElement},this.cardData=e};var n=r(0);function o(t,e,r){return(o=c()?Reflect.construct:function(t,e,r){var a=[null];a.push.apply(a,e);var n=new(Function.bind.apply(t,a));return r&&l(n,r.prototype),n}).apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}console.log("this is main page");var s=new Date,i=new Date;i.setDate(i.getDate()-6);var u=s.getFullYear(),d=i.getFullYear(),f=s.getMonth()+1,m=i.getMonth()+1,g=u+"-"+f+"-"+s.getDate(),h=d+"-"+m+"-"+i.getDate(),S=JSON.parse(localStorage.getItem("cardsNumber")),p=JSON.parse(localStorage.getItem("cards")),y=document.querySelector(".search-request__form"),v=document.querySelector("#search"),_=document.querySelector(".cards-list__container"),w=document.querySelector(".news"),A=document.querySelector(".preloader"),b=document.querySelector(".cards-list"),C=document.querySelector(".card-list__button"),D=document.querySelector(".not-found"),N=new n.a,O=new function t(e,r,a,n){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.getNewsCards=function(){var t="http://newsapi.org/v2/everything?"+"q=".concat(o.req.value,"&")+"from=".concat(o.fromDate,"&")+"to=".concat(o.toDate,"&")+"pageSize=100&language=ru&"+"apiKey=".concat(o.apiKey);return fetch(t).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))},this.req=e,this.toDate=r,this.fromDate=a,this.apiKey=n}(v,g,h,"e0f5e0253b0c468385220f7eaf110575"),q=new function t(e,r,a,n){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.addCard=function(t){o.container.append(t)},this.render=function(t){if(o.localArr=JSON.parse(localStorage.getItem("cards")),o.localArr.length>t){o.localStrg.setCardsShown(t),o.localAmount=JSON.parse(localStorage.getItem("cardsNumber"));for(var e=0;e<t;e++)o.addCard(o.createCard(o.localArr[e]).create())}else if(o.localArr.length<=t){o.localStrg.setCardsShown(t+(o.localArr.length-t));for(var r=0;r<o.localArr.length;r++)o.addCard(o.createCard(o.localArr[r]).create());o.moreBtn.classList.add("card-list__button_is-hidden")}},this.renderMore=function(){if(o.localArr=JSON.parse(localStorage.getItem("cards")),o.localAmount=JSON.parse(localStorage.getItem("cardsNumber")),o.localArr.length-o.localAmount>6){for(var t=o.localAmount;t<o.localAmount+6;t++)o.addCard(o.createCard(o.localArr[t]).create());o.localStrg.setCardsShown(o.localAmount+6),o.counter=JSON.parse(localStorage.getItem("cardsNumber"))}else if(o.localArr.length-o.localAmount<=6){for(var e=o.localAmount;e<o.localAmount+(o.localArr.length-o.localAmount);e++)o.addCard(o.createCard(o.localArr[e]).create());o.localStrg.setCardsShown(o.localAmount+(o.localArr.length-o.localAmount)),o.moreBtn.classList.add("card-list__button_is-hidden")}},this.showRenderedCards=function(t,e){for(var r=0;r<t;r++)o.addCard(o.createCard(e[r]).create())},this.createCard=r,this.container=e,this.moreBtn=a,this.localArr=[],this.localStrg=n}(_,(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return o(a,e)}),C,N);function I(t){!0===t?A.classList.add("preloader_is-active"):A.classList.remove("preloader_is-active")}if(null!==S){var L=JSON.parse(localStorage.getItem("request"));v.value=L,I(!1),w.classList.add("news_is-active"),b.classList.add("cards-list_is-active"),q.showRenderedCards(S,p)}else I(!1),w.classList.remove("news_is-active"),b.classList.remove("cards-list_is-active");y.addEventListener("submit",(function(t){t.preventDefault(),N.clearStorage(),w.classList.add("news_is-active"),I(!0),N.setReqValue(v.value),O.getNewsCards().then((function(t){N.setResults(t.totalResults),0===t.articles.length?(C.classList.add("card-list__button_is-hidden"),_.innerHTML="",D.classList.add("not-found_is-active"),b.classList.remove("cards-list_is-active")):(C.classList.remove("card-list__button_is-hidden"),_.innerHTML="",console.log(t),D.classList.remove("not-found_is-active"),b.classList.add("cards-list_is-active"),N.setCardsArr(t.articles),q.render(6))})).catch((function(t){return console.log("Ошибка: ".concat(t))})).finally((function(){I(!1)}))})),C.addEventListener("click",(function(){q.renderMore(p)}))}]);